# =============================================================================
# ULTRAZEND SMTP SERVER - PRODUCTION CONFIGURATION
# üöÄ Pure UltraZend SMTP - No Postfix Dependencies
# =============================================================================

# =============================================================================
# CORE SERVER CONFIGURATION
# =============================================================================
NODE_ENV=production
PORT=3001
HTTPS_PORT=443
HOST=0.0.0.0

# =============================================================================
# üìß ULTRAZEND SMTP CONFIGURATION (PURE MODE)
# =============================================================================

# UltraZend SMTP Server Settings
ULTRAZEND_SMTP_HOST=mail.ultrazend.com.br
ULTRAZEND_SMTP_PORT=25                    # Porta principal (ap√≥s remover Postfix)
ULTRAZEND_HOSTNAME=mail.ultrazend.com.br
ULTRAZEND_DOMAIN=ultrazend.com.br

# SMTP Server Ports
SMTP_MX_PORT=2525           # SMTPServer interno
SMTP_SUBMISSION_PORT=587    # Submission port (autenticado)
SMTP_USERNAME=noreply@ultrazend.com.br

# ‚ùå REMOVED: All Postfix/External SMTP configurations
# SMTP_HOST=localhost         # REMOVIDO
# SMTP_PORT=25               # REMOVIDO  
# SMTP_USER=                 # REMOVIDO
# SMTP_PASSWORD=             # REMOVIDO

# =============================================================================
# üîê DKIM CONFIGURATION
# =============================================================================
DKIM_PRIVATE_KEY_PATH=./configs/dkim-keys/ultrazend.com.br-default-private.pem
DKIM_DOMAIN=ultrazend.com.br
DKIM_SELECTOR=default

# =============================================================================
# üîÑ REDIS CONFIGURATION (Queue Processing)
# =============================================================================
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=""
REDIS_URL=redis://127.0.0.1:6379

# =============================================================================
# üõ°Ô∏è SECURITY CONFIGURATION
# =============================================================================
JWT_SECRET=ultrazend-jwt-production-key-64-characters-minimum-secure-key
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=ultrazend-refresh-production-key-64-characters-minimum-secure
JWT_REFRESH_EXPIRES_IN=30d
COOKIE_SECRET=ultrazend-cookie-production-key-64-characters-minimum-secure

# =============================================================================
# üåê DOMAIN CONFIGURATION
# =============================================================================
FRONTEND_URL=https://www.ultrazend.com.br
API_BASE_URL=https://api.ultrazend.com.br
ALLOWED_ORIGINS=https://ultrazend.com.br,https://www.ultrazend.com.br,https://app.ultrazend.com.br

# Tracking
TRACKING_DOMAIN=track.ultrazend.com.br
WEBHOOK_SECRET=ultrazend-webhook-secret-production

# =============================================================================
# üìä DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=/var/www/ultrazend/backend/ultrazend.sqlite

# =============================================================================
# üìà PERFORMANCE & SCALING
# =============================================================================

# Rate Limiting (Cliente-specific)
RATE_LIMIT_WINDOW_MS=60000      # 1 minuto
RATE_LIMIT_MAX_REQUESTS=1000    # 1000 emails/minuto por cliente
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# Email Queue Settings
EMAIL_QUEUE_CONCURRENCY=50      # Processar at√© 50 emails simultaneamente
EMAIL_RETRY_ATTEMPTS=5          # 5 tentativas por email
EMAIL_RETRY_DELAY=2000         # 2 segundos entre tentativas

# Connection Pooling
SMTP_MAX_CONNECTIONS=100        # Pool de 100 conex√µes SMTP
SMTP_CONNECTION_TIMEOUT=60000   # 60 segundos timeout
SMTP_POOL_TIMEOUT=300000        # 5 minutos pool timeout

# =============================================================================
# üìù LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FILE_PATH=/var/www/ultrazend/logs/ultrazend-smtp.log
LOG_MAX_SIZE=50m
LOG_MAX_FILES=10

# =============================================================================
# üöÄ ULTRAZEND FEATURES
# =============================================================================

# Core Features
ENABLE_DIRECT_MX_DELIVERY=true      # ‚úÖ Entrega direta aos MX records
ENABLE_DKIM_SIGNING=true            # ‚úÖ Assinatura DKIM autom√°tica  
ENABLE_DELIVERY_TRACKING=true       # ‚úÖ Tracking de entrega
ENABLE_WEBHOOK_NOTIFICATIONS=true   # ‚úÖ Webhooks em tempo real
ENABLE_ANALYTICS=true               # ‚úÖ Analytics avan√ßadas
ENABLE_QUEUE_PROCESSING=true        # ‚úÖ Processamento de filas

# API Features
ENABLE_SWAGGER=false                # ‚ùå Desabilitado em produ√ß√£o
ENABLE_METRICS=true                 # ‚úÖ M√©tricas Prometheus
ENABLE_HEALTH_CHECKS=true           # ‚úÖ Health checks
ENABLE_DETAILED_HEALTH_CHECKS=true  # ‚úÖ Health checks detalhados

# Security Features  
ENABLE_SECURITY_HEADERS=true        # ‚úÖ Headers de seguran√ßa
ENABLE_REQUEST_LOGGING=true         # ‚úÖ Log de requests
ENABLE_CORRELATION_IDS=true         # ‚úÖ IDs de correla√ß√£o

# Performance Features
ENABLE_PERFORMANCE_MONITORING=true  # ‚úÖ Monitoramento de performance
ENABLE_CONNECTION_POOLING=true      # ‚úÖ Pool de conex√µes SMTP
ENABLE_BATCH_PROCESSING=true        # ‚úÖ Processamento em lote

# =============================================================================
# üîß OPERATIONAL SETTINGS
# =============================================================================

# Health Checks
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# Security
BCRYPT_SALT_ROUNDS=12
TRUST_PROXY=1

# CORS
HSTS_MAX_AGE=31536000
CSP_REPORT_ONLY=false

# File Upload
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=text/html,text/plain,application/json

# =============================================================================
# üéØ ULTRAZEND BUSINESS LOGIC
# =============================================================================

# Email Limits per Plan
FREE_PLAN_DAILY_LIMIT=100
BASIC_PLAN_DAILY_LIMIT=10000  
PRO_PLAN_DAILY_LIMIT=100000
ENTERPRISE_PLAN_DAILY_LIMIT=1000000

# Delivery Settings
MAX_DELIVERY_ATTEMPTS=5
DELIVERY_RETRY_BACKOFF=exponential
DELIVERY_TIMEOUT=30000

# Analytics Retention
ANALYTICS_RETENTION_DAYS=90
LOGS_RETENTION_DAYS=30

# =============================================================================
# üîÑ WORKER CONFIGURATION
# =============================================================================

# Email Workers
EMAIL_WORKER_CONCURRENCY=10      # 10 workers de email
EMAIL_WORKER_POLL_INTERVAL=5000  # Polling a cada 5 segundos

# Analytics Workers  
ANALYTICS_WORKER_CONCURRENCY=5   # 5 workers de analytics
ANALYTICS_BATCH_SIZE=100         # Processar 100 eventos por vez

# Webhook Workers
WEBHOOK_WORKER_CONCURRENCY=5     # 5 workers de webhook
WEBHOOK_TIMEOUT=10000            # 10 segundos timeout

# =============================================================================
# üöÄ DEPLOYMENT INFO
# =============================================================================

# Version
ULTRAZEND_VERSION=1.0.0
BUILD_NUMBER=production
DEPLOYMENT_DATE=2025-01-09

# Mode
SMTP_MODE=pure_ultrazend         # üéØ Modo puro UltraZend
POSTFIX_ENABLED=false           # ‚ùå Postfix desabilitado
DELIVERY_MODE=direct_mx         # üéØ Entrega direta aos MX records

# =============================================================================
# END OF ULTRAZEND SMTP PRODUCTION CONFIGURATION
# =============================================================================